<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–°–∞–º–æ–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  --c1:#C31532;--c1h:#a01029;--c1l:rgba(195,21,50,.06);
  --c2:#495761;--c3:#003B48;--c3l:rgba(0,59,72,.05);
  --g:#16a34a;--gl:#dcfce7;--gd:#15803d;
  --y:#d97706;--yl:#fef3c7;--yd:#92400e;
  --r:#C31532;--rl:#fce8eb;--rd:#a01029;
  --bg:#f4f5f6;--w:#fff;
  --t1:#1a1f25;--t2:#495761;--t3:#8a949d;--brd:#dfe3e7;
  --rad:12px;
}
html,body{height:100%;overflow:hidden}
body{font-family:'Segoe UI',-apple-system,BlinkMacSystemFont,Roboto,sans-serif;
  background:var(--bg);color:var(--t1);line-height:1.6;-webkit-font-smoothing:antialiased;
  display:flex;align-items:center;justify-content:center}
.sd{width:100%;max-width:520px;padding:12px}

.sd-v{display:none}.sd-v.on{display:flex;flex-direction:column;justify-content:center;min-height:0}

/* ===== INTRO ===== */
.sd-intro{background:var(--w);border-radius:var(--rad);padding:28px 22px;
  text-align:center;box-shadow:0 1px 4px rgba(0,0,0,.06)}
.sd-intro-ico{width:48px;height:48px;background:var(--c3);color:#fff;border-radius:50%;
  display:flex;align-items:center;justify-content:center;font-size:1.3rem;margin:0 auto 12px}
.sd-intro h2{color:var(--c3);font-size:1.1rem;margin-bottom:8px}
.sd-intro p{color:var(--t2);font-size:.86rem;margin-bottom:4px}
.sd-intro .note{color:var(--t3);font-size:.76rem;font-style:italic;margin:4px 0 16px}
.btn-start{background:var(--c1);color:#fff;border:none;padding:11px 34px;
  font-size:.95rem;font-weight:700;border-radius:8px;cursor:pointer;
  transition:background .2s,transform .15s}
.btn-start:hover{background:var(--c1h);transform:translateY(-1px)}

/* ===== PROGRESS ===== */
.sd-prog{margin-bottom:12px}
.sd-prog-row{display:flex;justify-content:space-between;margin-bottom:4px}
.sd-prog-row span{font-size:.76rem;color:var(--t3);font-weight:600}
.sd-prog-track{background:var(--brd);border-radius:6px;height:4px;overflow:hidden}
.sd-prog-fill{height:100%;background:var(--c1);border-radius:6px;transition:width .4s ease;width:0%}

/* ===== QUESTION ===== */
.sd-qc{background:var(--w);border-radius:var(--rad);padding:24px 20px;
  box-shadow:0 1px 4px rgba(0,0,0,.06);margin-bottom:12px;
  transition:opacity .2s,transform .2s}
.sd-qc.fade{opacity:0;transform:translateY(10px)}
.sd-qt{font-size:1.02rem;text-align:center;min-height:48px;
  display:flex;align-items:center;justify-content:center;
  line-height:1.5;margin-bottom:18px;color:var(--t1)}
.sd-labels{display:flex;justify-content:space-between;padding:0 2px;margin-bottom:5px}
.sd-labels span{font-size:.66rem;color:var(--t3);max-width:76px;line-height:1.2}
.sd-labels span:first-child{text-align:left}
.sd-labels span:last-child{text-align:right}
.sd-opts{display:flex;gap:8px}
.sd-o{flex:1;height:46px;border:2px solid var(--brd);border-radius:10px;
  background:var(--w);color:var(--t2);font-size:1.1rem;font-weight:700;
  cursor:pointer;transition:all .15s;display:flex;align-items:center;justify-content:center}
.sd-o:hover{border-color:var(--c1);color:var(--c1);background:var(--c1l)}
.sd-o.sel{background:var(--c1);border-color:var(--c1);color:#fff;
  box-shadow:0 2px 8px rgba(195,21,50,.25);transform:scale(1.06)}

/* ===== NAV ===== */
.sd-nav{display:flex;justify-content:space-between;align-items:center}
.btn-back{background:none;border:2px solid var(--brd);color:var(--t2);
  padding:9px 16px;font-size:.86rem;font-weight:600;border-radius:8px;
  cursor:pointer;transition:all .2s}
.btn-back:hover{border-color:var(--c2);color:var(--c3)}
.btn-back:disabled{opacity:.25;cursor:default;pointer-events:none}
.btn-next{background:var(--brd);border:none;color:var(--t3);
  padding:9px 24px;font-size:.9rem;font-weight:700;border-radius:8px;
  cursor:not-allowed;transition:all .2s;margin-left:auto}
.btn-next.go{background:var(--c1);color:#fff;cursor:pointer;
  box-shadow:0 2px 10px rgba(195,21,50,.3)}
.btn-next.go:hover{background:var(--c1h);transform:translateY(-1px)}

/* ===== RESULT CARD ===== */
.sd-rc{background:var(--w);border-radius:var(--rad);padding:24px 22px;
  box-shadow:0 2px 8px rgba(0,0,0,.08);margin-bottom:12px}
.sd-rc-hdr{text-align:center;padding-bottom:12px;margin-bottom:14px;
  border-bottom:2px solid var(--bg)}
.sd-rc-hdr h2{color:var(--c3);font-size:1.05rem;margin-bottom:2px}
.sd-rc-hdr p{color:var(--t3);font-size:.74rem}
.sd-sr{margin-bottom:14px}.sd-sr:last-of-type{margin-bottom:0}
.sd-sr-top{display:flex;justify-content:space-between;align-items:center;margin-bottom:4px}
.sd-sr-name{font-size:.84rem;font-weight:700;color:var(--t1)}
.sd-sr-sc{font-size:.82rem;font-weight:700}
.sd-sr-sc.green{color:var(--g)}.sd-sr-sc.yellow{color:var(--y)}.sd-sr-sc.red{color:var(--r)}
.sd-bt{background:var(--bg);border-radius:6px;height:8px;overflow:hidden;margin-bottom:4px}
.sd-bf{height:100%;border-radius:6px;width:0%;transition:width 1s cubic-bezier(.4,0,.2,1)}
.sd-bf.green{background:var(--g)}.sd-bf.yellow{background:var(--y)}.sd-bf.red{background:var(--r)}
.sd-zl{display:inline-block;padding:2px 10px;border-radius:12px;font-size:.68rem;font-weight:600}
.sd-zl.green{background:var(--gl);color:var(--gd)}
.sd-zl.yellow{background:var(--yl);color:var(--yd)}
.sd-zl.red{background:var(--rl);color:var(--rd)}
.sd-ov{text-align:center;padding-top:14px;margin-top:16px;border-top:2px solid var(--bg)}
.sd-ov-i{font-size:1.8rem;margin-bottom:2px}
.sd-ov h3{font-size:.98rem;margin-bottom:5px}
.sd-ov p{font-size:.8rem;color:var(--t2);line-height:1.5;max-width:400px;margin:0 auto}
.sd-rc-ft{text-align:center;padding-top:10px;margin-top:12px;
  border-top:1px solid var(--bg);font-size:.66rem;color:var(--t3)}

/* ===== ACTIONS ===== */
.sd-acts{display:flex;gap:8px;justify-content:center;flex-wrap:wrap}
.btn-save{background:var(--c1);color:#fff;border:none;padding:10px 20px;
  font-size:.86rem;font-weight:600;border-radius:8px;cursor:pointer;
  transition:all .2s;display:flex;align-items:center;gap:5px}
.btn-save:hover{background:var(--c1h);transform:translateY(-1px)}
.btn-save:disabled{opacity:.6;cursor:wait;transform:none}
.btn-rst{background:none;border:2px solid var(--brd);color:var(--t2);
  padding:10px 20px;font-size:.86rem;font-weight:600;border-radius:8px;
  cursor:pointer;transition:all .2s}
.btn-rst:hover{border-color:var(--c2);color:var(--c3)}

@media(max-width:480px){
  .sd{padding:8px 6px}
  .sd-intro{padding:20px 14px}
  .sd-qc{padding:18px 12px}
  .sd-opts{gap:5px}
  .sd-o{height:42px;font-size:1rem;border-radius:8px}
  .sd-qt{font-size:.95rem;min-height:42px}
  .sd-rc{padding:18px 14px}
}
</style>
</head>
<body>
<div class="sd">

  <!-- ===== INTRO ===== -->
  <div class="sd-v on" id="vIntro">
    <div class="sd-intro">
      <div class="sd-intro-ico">üìã</div>
      <h2>–°–∞–º–æ–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞: –≤–∞—à —Ä–µ—Å—É—Ä—Å –∫–∞–∫ —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è</h2>
      <p>18 –∫–æ—Ä–æ—Ç–∫–∏—Ö —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π –æ –≤–∞—à–µ–π —Ä–∞–±–æ—Ç–µ, —ç–Ω–µ—Ä–≥–∏–∏ –∏ —Å–∞–º–æ–æ—â—É—â–µ–Ω–∏–∏ –≤ —Ä–æ–ª–∏ –º–µ–Ω–µ–¥–∂–µ—Ä–∞.</p>
      <p>–û—Ü–µ–Ω–∏—Ç–µ –∫–∞–∂–¥–æ–µ –ø–æ —à–∫–∞–ª–µ –æ—Ç 1 –¥–æ 5, –æ–ø–∏—Ä–∞—è—Å—å –Ω–∞ –æ—â—É—â–µ–Ω–∏—è <strong>–∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 2‚Äì3 –º–µ—Å—è—Ü–∞</strong>.</p>
      <div class="note">–≠—Ç–æ –Ω–µ —Ç–µ—Å—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –æ—Ç–≤–µ—Ç–∞–º–∏, –∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Å–∞–º–æ—Ä–µ—Ñ–ª–µ–∫—Å–∏–∏. –ó–∞–π–º—ë—Ç 3‚Äì4 –º–∏–Ω—É—Ç—ã.</div>
      <button class="btn-start" onclick="start()">–ù–∞—á–∞—Ç—å ‚Üí</button>
    </div>
  </div>

  <!-- ===== QUIZ ===== -->
  <div class="sd-v" id="vQuiz">
    <div class="sd-prog">
      <div class="sd-prog-row">
        <span id="pLbl">–í–æ–ø—Ä–æ—Å 1 –∏–∑ 18</span>
        <span id="pPct"></span>
      </div>
      <div class="sd-prog-track"><div class="sd-prog-fill" id="pFill"></div></div>
    </div>
    <div class="sd-qc" id="qCard">
      <div class="sd-qt" id="qTxt"></div>
      <div class="sd-labels">
        <span>–°–æ–≤—Å–µ–º<br>–Ω–µ –æ–±–æ –º–Ω–µ</span>
        <span>–¢–æ—á–Ω–æ<br>–ø—Ä–æ –º–µ–Ω—è</span>
      </div>
      <div class="sd-opts" id="qOpts"></div>
    </div>
    <div class="sd-nav">
      <button class="btn-back" id="bBack" onclick="prev()" disabled>‚Üê –ù–∞–∑–∞–¥</button>
      <button class="btn-next" id="bNext" onclick="next()">–î–∞–ª–µ–µ ‚Üí</button>
    </div>
  </div>

  <!-- ===== RESULTS ===== -->
  <div class="sd-v" id="vRes">
    <div class="sd-rc" id="resCard"></div>
    <div class="sd-acts">
      <button class="btn-save" id="bSave" onclick="saveImg()">üì∏ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç</button>
      <button class="btn-rst" onclick="restart()">‚Üª –ü—Ä–æ–π—Ç–∏ –∑–∞–Ω–æ–≤–æ</button>
    </div>
  </div>

</div>

<script>
const QS=[
  {id:1, txt:"–Ø –ø—Ä–æ—Å—ã–ø–∞—é—Å—å —Å —ç–Ω–µ—Ä–≥–∏–µ–π –∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å—é –∫ —Ä–∞–±–æ—á–µ–º—É –¥–Ω—é.",                                    sc:"EN",rv:0},
  {id:2, txt:"–ú–Ω–µ –≤—Å—ë —á–∞—â–µ –∫–∞–∂–µ—Ç—Å—è, —á—Ç–æ –º–æ—è —Ä–∞–±–æ—Ç–∞ –Ω–µ –∏–º–µ–µ—Ç –æ—Å–æ–±–æ–≥–æ —Å–º—ã—Å–ª–∞.",                             sc:"EG",rv:1},
  {id:3, txt:"–Ø —É–≤–µ—Ä–µ–Ω(–∞), —á—Ç–æ —Ö–æ—Ä–æ—à–æ —Å–ø—Ä–∞–≤–ª—è—é—Å—å —Å–æ —Å–≤–æ–µ–π —Ä–æ–ª—å—é —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è.",                           sc:"CF",rv:0},
  {id:4, txt:"–£ –º–µ–Ω—è –±—ã–≤–∞–µ—Ç –æ—â—É—â–µ–Ω–∏–µ, —á—Ç–æ —è —Ä–∞–±–æ—Ç–∞—é –Ω–∞ –∏–∑–Ω–æ—Å.",                                           sc:"EN",rv:1},
  {id:5, txt:"–ú–Ω–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ —Ç–æ, —á–µ–º —è –∑–∞–Ω–∏–º–∞—é—Å—å –Ω–∞ —Ä–∞–±–æ—Ç–µ.",                                sc:"EG",rv:0},
  {id:6, txt:"–Ø —á–∞—Å—Ç–æ —Å–æ–º–Ω–µ–≤–∞—é—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ —Å–≤–æ–∏—Ö —É–ø—Ä–∞–≤–ª–µ–Ω—á–µ—Å–∫–∏—Ö —Ä–µ—à–µ–Ω–∏–π.",                            sc:"CF",rv:1},
  {id:7, txt:"–ü–æ—Å–ª–µ –≤—ã—Ö–æ–¥–Ω—ã—Ö —è —á—É–≤—Å—Ç–≤—É—é —Å–µ–±—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ—Ç–¥–æ—Ö–Ω—É–≤—à–∏–º(–µ–π), —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –Ω–æ–≤—É—é –Ω–µ–¥–µ–ª—é.",      sc:"EN",rv:0},
  {id:8, txt:"–û–±—â–µ–Ω–∏–µ —Å –∫–æ–º–∞–Ω–¥–æ–π –∏ –∫–æ–ª–ª–µ–≥–∞–º–∏ —Å—Ç–∞–ª–æ –≤—ã–∑—ã–≤–∞—Ç—å —É –º–µ–Ω—è –±–æ–ª—å—à–µ —É—Å—Ç–∞–ª–æ—Å—Ç–∏, —á–µ–º –∏–Ω—Ç–µ—Ä–µ—Å–∞.",       sc:"EG",rv:1},
  {id:9, txt:"–ö–æ–≥–¥–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç —Å–ª–æ–∂–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è, —è –≤–µ—Ä—é, —á—Ç–æ —Å–º–æ–≥—É –Ω–∞–π—Ç–∏ —Ä–µ—à–µ–Ω–∏–µ.",                         sc:"CF",rv:0},
  {id:10,txt:"–Ø –∑–∞–º–µ—á–∞—é, —á—Ç–æ —Å—Ç–∞–ª(–∞) —Ä–∞–∑–¥—Ä–∞–∂–∏—Ç–µ–ª—å–Ω—ã–º(–æ–π) –ø–æ –º–µ–ª–æ—á–∞–º –Ω–∞ —Ä–∞–±–æ—Ç–µ.",                           sc:"EN",rv:1},
  {id:11,txt:"–Ø –≤–∏–∂—É, –∫–∞–∫ –º–æ–∏ —É—Å–∏–ª–∏—è —Ä–µ–∞–ª—å–Ω–æ –≤–ª–∏—è—é—Ç –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫–æ–º–∞–Ω–¥—ã.",                                sc:"EG",rv:0},
  {id:12,txt:"–ú–Ω–µ –∫–∞–∂–µ—Ç—Å—è, —á—Ç–æ –¥—Ä—É–≥–æ–π —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –Ω–∞ –º–æ—ë–º –º–µ—Å—Ç–µ —Å–ø—Ä–∞–≤–ª—è–ª—Å—è –±—ã –ª—É—á—à–µ.",                     sc:"CF",rv:1},
  {id:13,txt:"–ú–Ω–µ —É–¥–∞—ë—Ç—Å—è —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —è—Å–Ω–æ—Å—Ç—å –º—ã—à–ª–µ–Ω–∏—è –∏ –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—é –≤ —Ç–µ—á–µ–Ω–∏–µ —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è.",               sc:"EN",rv:0},
  {id:14,txt:"–ù–∞ —Ä–∞–±–æ—Ç–µ —è –≤—Å—ë —á–∞—â–µ —Ö–æ—á—É, —á—Ç–æ–±—ã –º–µ–Ω—è –ø—Ä–æ—Å—Ç–æ –æ—Å—Ç–∞–≤–∏–ª–∏ –≤ –ø–æ–∫–æ–µ.",                             sc:"EG",rv:1},
  {id:15,txt:"–Ø —á—É–≤—Å—Ç–≤—É—é, —á—Ç–æ —Ä–∞—Å—Ç—É –∏ —Ä–∞–∑–≤–∏–≤–∞—é—Å—å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ –≤ —Å–≤–æ–µ–π —Ä–æ–ª–∏.",                            sc:"CF",rv:0},
  {id:16,txt:"–ö –∫–æ–Ω—Ü—É —Ä–∞–±–æ—á–µ–π –Ω–µ–¥–µ–ª–∏ —è —á—É–≤—Å—Ç–≤—É—é —Å–µ–±—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–ø—É—Å—Ç–æ—à—ë–Ω–Ω—ã–º(–æ–π).",                          sc:"EN",rv:1},
  {id:17,txt:"–Ø –≥–æ—Ç–æ–≤(–∞) –≤–∫–ª–∞–¥—ã–≤–∞—Ç—å—Å—è –≤ —Ä–∞–±–æ—Ç—É —Å–≤–µ—Ä—Ö –º–∏–Ω–∏–º—É–º–∞, –∫–æ–≥–¥–∞ –≤–∏–∂—É –≤ —ç—Ç–æ–º —Ü–µ–Ω–Ω–æ—Å—Ç—å –¥–ª—è –¥–µ–ª–∞.",       sc:"EG",rv:0},
  {id:18,txt:"–Ø –ª–æ–≤–ª—é —Å–µ–±—è –Ω–∞ –º—ã—Å–ª–∏, —á—Ç–æ –Ω–µ –¥–æ—Ç—è–≥–∏–≤–∞—é –¥–æ —É—Ä–æ–≤–Ω—è, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–µ–Ω –Ω–∞ –º–æ–µ–π –ø–æ–∑–∏—Ü–∏–∏.",          sc:"CF",rv:1}
];
const N=QS.length,MAX=30,MIN=6,RNG=MAX-MIN;
let cur=0;
const ans=new Array(N).fill(null);

function show(id){
  document.querySelectorAll('.sd-v').forEach(v=>v.classList.remove('on'));
  document.getElementById(id).classList.add('on');
}
function start(){show('vQuiz');renderQ()}

function renderQ(){
  document.getElementById('qTxt').textContent=QS[cur].txt;
  document.getElementById('pLbl').textContent=`–í–æ–ø—Ä–æ—Å ${cur+1} –∏–∑ ${N}`;
  document.getElementById('pFill').style.width=((cur+1)/N*100)+'%';
  document.getElementById('bBack').disabled=(cur===0);
  const bn=document.getElementById('bNext');
  bn.textContent=(cur===N-1)?'–ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã':'–î–∞–ª–µ–µ ‚Üí';
  const box=document.getElementById('qOpts');
  box.innerHTML='';
  for(let v=1;v<=5;v++){
    const b=document.createElement('button');
    b.className='sd-o'+(ans[cur]===v?' sel':'');
    b.textContent=v;
    b.onclick=()=>pick(v);
    box.appendChild(b);
  }
  updNext();
}

function pick(v){
  ans[cur]=v;
  document.querySelectorAll('.sd-o').forEach((b,i)=>b.classList.toggle('sel',i+1===v));
  updNext();
}

function updNext(){
  const bn=document.getElementById('bNext');
  ans[cur]!==null?bn.classList.add('go'):bn.classList.remove('go');
}

function next(){if(ans[cur]===null)return;cur<N-1?anim(cur+1):calc()}
function prev(){if(cur>0)anim(cur-1)}

function anim(idx){
  const c=document.getElementById('qCard');
  c.classList.add('fade');
  setTimeout(()=>{cur=idx;renderQ();requestAnimationFrame(()=>c.classList.remove('fade'))},200);
}

function calc(){
  const sc={EN:0,EG:0,CF:0};
  QS.forEach((q,i)=>{const v=ans[i];sc[q.sc]+=q.rv?(6-v):v});
  showRes(sc);
}

function zone(s){return s>=24?'green':s>=16?'yellow':'red'}
const ZL={green:'–†–µ—Å—É—Ä—Å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ',yellow:'–ó–æ–Ω–∞ –≤–Ω–∏–º–∞–Ω–∏—è',red:'–ó–æ–Ω–∞ —Ä–∏—Å–∫–∞'};
const SM={EN:'‚ö° –≠–Ω–µ—Ä–≥–∏—è –∏ —Ä–µ—Å—É—Ä—Å',EG:'üéØ –í–æ–≤–ª–µ—á—ë–Ω–Ω–æ—Å—Ç—å –∏ —Å–º—ã—Å–ª',CF:'üí™ –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ —Å–µ–±–µ'};

function showRes(sc){
  const zs={};
  ['EN','EG','CF'].forEach(k=>zs[k]=zone(sc[k]));

  let h=`<div class="sd-rc-hdr"><h2>–°–∞–º–æ–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞: –≤–∞—à —Ä–µ—Å—É—Ä—Å</h2>
    <p>–≠–Ω–µ—Ä–≥–∏—è ¬∑ –í–æ–≤–ª–µ—á—ë–Ω–Ω–æ—Å—Ç—å ¬∑ –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å</p></div>`;

  ['EN','EG','CF'].forEach(k=>{
    const z=zs[k],pct=Math.round((sc[k]-MIN)/RNG*100);
    h+=`<div class="sd-sr"><div class="sd-sr-top">
      <span class="sd-sr-name">${SM[k]}</span>
      <span class="sd-sr-sc ${z}">${sc[k]}/${MAX}</span></div>
      <div class="sd-bt"><div class="sd-bf ${z}" data-p="${pct}"></div></div>
      <span class="sd-zl ${z}">${ZL[z]}</span></div>`;
  });

  const ov=overall(zs);
  h+=`<div class="sd-ov"><div class="sd-ov-i">${ov.i}</div>
    <h3 style="color:${ov.c}">${ov.t}</h3><p>${ov.p}</p></div>
    <div class="sd-rc-ft">${new Date().toLocaleDateString('ru-RU',
      {day:'numeric',month:'long',year:'numeric'})}</div>`;

  document.getElementById('resCard').innerHTML=h;
  show('vRes');
  requestAnimationFrame(()=>requestAnimationFrame(()=>{
    document.querySelectorAll('.sd-bf').forEach(b=>b.style.width=b.dataset.p+'%');
  }));
}

function overall(z){
  const v=Object.values(z),r=v.filter(x=>x==='red').length,g=v.filter(x=>x==='green').length;
  if(g===3)return{i:'üü¢',t:'–†–µ—Å—É—Ä—Å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ',c:'var(--g)',
    p:'–í—Å–µ —Ç—Ä–∏ –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è –≤ –∑–µ–ª—ë–Ω–æ–π –∑–æ–Ω–µ. –í—ã —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç–µ —ç–Ω–µ—Ä–≥–∏—é, –≤–æ–≤–ª–µ—á—ë–Ω–Ω–æ—Å—Ç—å –∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å.'};
  if(r===0&&g>=2)return{i:'üü¢',t:'–í —Ü–µ–ª–æ–º —Ö–æ—Ä–æ—à–∏–π —Ä–µ—Å—É—Ä—Å',c:'var(--g)',
    p:'–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π –≤ –Ω–æ—Ä–º–µ. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ, —á—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è.'};
  if(r===0)return{i:'üü°',t:'–ï—Å—Ç—å –∑–æ–Ω—ã –¥–ª—è –≤–Ω–∏–º–∞–Ω–∏—è',c:'var(--y)',
    p:'–ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ –æ—â—É—â–∞–µ—Ç—Å—è –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º. –•–æ—Ä–æ—à–∏–π –º–æ–º–µ–Ω—Ç –¥–ª—è –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∏.'};
  if(r===1)return{i:'üü†',t:'–ï—Å—Ç—å –∑–æ–Ω–∞ —Ä–∏—Å–∫–∞',c:'var(--r)',
    p:'–û–¥–∏–Ω –∏–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –≤ –∫—Ä–∞—Å–Ω–æ–π –∑–æ–Ω–µ ‚Äî —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º –æ–±—Å—É–¥–∏—Ç—å —Å–∏—Ç—É–∞—Ü–∏—é —Å –∫–æ—É—á–µ–º –∏–ª–∏ HR.'};
  if(r===2)return{i:'üî¥',t:'–í—ã—Ä–∞–∂–µ–Ω–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ –≤—ã–≥–æ—Ä–∞–Ω–∏—è',c:'var(--r)',
    p:'–î–≤–∞ –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è –≤ –∫—Ä–∞—Å–Ω–æ–π –∑–æ–Ω–µ. –í–∞–º –Ω—É–∂–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ ‚Äî –ø–æ–≥–æ–≤–æ—Ä–∏—Ç–µ —Å —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª–µ–º –∏–ª–∏ –ø—Å–∏—Ö–æ–ª–æ–≥–æ–º.'};
  return{i:'üö®',t:'–í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ –≤—ã–≥–æ—Ä–∞–Ω–∏—è',c:'var(--r)',
    p:'–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ –∫—Ä–∞—Å–Ω–æ–π –∑–æ–Ω–µ. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∑–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π –ø–æ–º–æ—â—å—é.'};
}

async function saveImg(){
  const btn=document.getElementById('bSave'),card=document.getElementById('resCard');
  if(typeof html2canvas==='undefined'){
    alert('–°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç —ç–∫—Ä–∞–Ω–∞ (PrtScr / Cmd+Shift+4)');return;
  }
  btn.disabled=true;btn.innerHTML='‚è≥ –§–æ—Ä–º–∏—Ä—É—é‚Ä¶';
  try{
    const cvs=await html2canvas(card,{scale:2,backgroundColor:'#ffffff',logging:false,useCORS:true});
    const a=document.createElement('a');
    a.download='—Å–∞–º–æ–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞-'+new Date().toLocaleDateString('ru-RU')+'.png';
    a.href=cvs.toDataURL('image/png');a.click();
    btn.innerHTML='‚úì –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ!';
    setTimeout(()=>{btn.innerHTML='üì∏ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç';btn.disabled=false},2500);
  }catch(e){
    alert('–ù–µ —É–¥–∞–ª–æ—Å—å —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ. –°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç –≤—Ä—É—á–Ω—É—é.');
    btn.innerHTML='üì∏ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç';btn.disabled=false;
  }
}

function restart(){ans.fill(null);cur=0;show('vIntro')}
</script>
</body>
</html>
